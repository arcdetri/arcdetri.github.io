<!DOCTYPE html>
<html lang="zh">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>翻墙 GFW China</title>
<meta name="description" content="越过长城，走向世界 Cross the Great Wall, and go to the world">
<meta name="keywords" content="翻墙,gfw,china">
<link rel="stylesheet" type="text/css" href="style.css">
</head>

<body>

<div id="header">
<p><a href="/">Technical Blog</a></p>
</div>

<div>

<p><em>2019年7月19日</em></p>

<h1>翻墙 GFW China</h1>
 
<h2>客户端下载</h2>
<p><a href="https://s3.tok.ap.cloud-object-storage.appdomain.cloud/xzdl/btsync_glibc23_i386-1.4.111.tar.gz" target="_blank">btsync_glibc23_i386-1.4.111.tar.gz</a></p>
<p><a href="https://s3.tok.ap.cloud-object-storage.appdomain.cloud/xzdl/btsync_glibc23_x64-1.4.111.tar.gz" target="_blank">btsync_glibc23_x64-1.4.111.tar.gz</a></p>
<p><a href="https://s3.tok.ap.cloud-object-storage.appdomain.cloud/xzdl/btsync_i386-1.4.111.tar.gz" target="_blank">btsync_i386-1.4.111.tar.gz</a></p>
<p><a href="
https://s3.tok.ap.cloud-object-storage.appdomain.cloud/xzdl/btsync_x64-1.4.111.tar.gz" target="_blank">btsync_x64-1.4.111.tar.gz</a></p>
<p><a href="
https://s3.tok.ap.cloud-object-storage.appdomain.cloud/xzdl/BTSync_x64-1.4.111.exe" target="_blank">BTSync_x64-1.4.111.exe</a></p>
<p><a href="
https://s3.tok.ap.cloud-object-storage.appdomain.cloud/xzdl/BTSync-1.4.111.exe" target="_blank">BTSync-1.4.111.exe</a></p>
<p><a href="
https://s3.tok.ap.cloud-object-storage.appdomain.cloud/xzdl/BTSync-1.4.111.dmg" target="_blank">BTSync-1.4.111.dmg</a></p>
<p><a href="https://github.com/getlantern/lantern-binaries">https://github.com/getlantern/lantern-binaries</a></p>
<p><a href="https://github.com/TheTorProject/gettorbrowser/releases">https://github.com/TheTorProject/gettorbrowser/releases</a></p>

<h1>翻墙党</h1>
<p><a href="https://fanqiangdang.com">https://fanqiangdang.com</a></p>
<p>不翻墙访问本站：</p>
<p>一、电脑windows，</p>
<ol>
<li>进入目录C:/Windows/System32/drivers/etc</li>
<li>用记事本打开hosts文件，在最后一行添加信息：104.16.248.1 fanqiangdang.com </li>
<li>打开命令行工具(win+R 输入cmd回车)执行：ipconfig /flushdns </li>
<li>重新刷新页面即可</li>
</ol>
<p>二、安卓可下载Hosts Go添加fanqiangdang.com绑定到104.16.248.1。</p>
 
<h1>绕过GFW中国2019</h1>
<p>我们首先简要总结一下我们如何到达今天的位置。中国防火墙（GFW）于2003年开始运作。早期的审查方法包括互联网协议（IP）阻止，域名系统（DNS）中毒以及传输控制协议（TCP）重置的恶意插入。Tor于2009年被封锁，公共obfs4桥梁在引入后几个月被封锁。OpenVPN在2013年被封锁。</p>
<p>2015年，中国共产党（CCP）扩大了审查范围，包括个人和技术措施。2015年8月，传奇的Clowwindy受邀喝茶。2017年7月，Breakwa11被搜查了人肉，并删除了她的Github存储库（尽管这似乎不是CCP初始化的结果）。2018年11月，Toyo从互联网上消失，他的Github帐户被删除。2019年3月25日，河南新密州检察官指控他为计算机犯罪提供便利。同年5月，Teddysun删除了他关于安装脚本的文章。</p>
<p>偶尔会有报道称，网民只是因为拥有GFW规避软件而被指控犯有行政违法行为。2018年12月28日，广东韶关的一名用户因手机上有Lantern（蓝灯）专业而被罚款1000元。同样地，在2019年3月25日，四川蓬溪县的一名用户在他的电话上找到五界一点通时发出警告。手机的物理检查似乎是这两种情况的一个因素。富裕的用户应该考虑在旅行时携带燃烧器电话; 每个人都应该记住如何在紧急情况下快速重置手机。</p>
<p>网民和审查者之间的争斗经常被描述为猫捉老鼠的游戏。这在这里尤其如此，因为广泛传播技术信息必然要求公开，公众讨论对于中共来说和其他人一样可见。</p>
<p>有一段时间，网民之间的公开讨论发生在Google Plus小组上。在2019年4月，Google关闭了Google Plus。关于中文博客，论坛和群组的技术讨论仍在继续。出于显而易见的原因，讨论必须在中国境外举行，海报必须以假名注册。在2019年，我们了解到CCP可以通过恶意请求密码重置来对Twitter用户进行去匿名化。当密码重置消息被发送到中国电话号码时，CCP拦截该消息并识别用户。</p>
<p>在所谓的“敏感”时期，审查制度非常紧张。一个例子是2019年3月的两次全国政会（全国两会）。2019年6月4日是中共命令军队向天安门广场开火的三十周年纪念日（六四事件）。在接近这个周年纪念的几周内，维基百科被封锁了所有语言。在人工智能的帮助下，图像和关键字阻塞得到加强。中共的批评者在没有解释的情况下消失了。一个为什么审查制度被定期收紧和放松的理论是，中共愿意允许一定程度的冤情，但会打击任何可能导致有组织抗议的事情。</p>
<p>这为2019年绕过中国的GFW留下了以下可能性：</p>
<ul>
<li>ShadowsocksR（SSR）可能仍然是最常用的穿墙方法，尽管不再维护它。</li>
<li>原始的Shadowsocks（SS）仍然保留。一个有趣的创新是Shadowsocks-Libev的Cloak插件。这旨在将SS服务器伪装成HTTPS服务器。</li>
<li>虽然配置起来比较困难，但V2Ray提供的功能更多，并且比SS更不容易被阻止。V2Ray的图形用户界面（GUI）由单独的项目提供，例如用于Windows的V2RayN和用于Android的BifrostV。</li>
<li>自2017年10月以来，Github上的trojan-gfw / trojan项目一直处于开发阶段。它声称模仿HTTPS以至于无法察觉。配置比SS / SSR稍微复杂一些。</li>
<li>Github上的ValdikSS / GoodbyeDPI项目声称能够绕过深度数据包检测（DPI）。</li>
<li>GreatFire项目提供FreeBrowser。</li>
<li>灯笼和Psiphon仍然存在。</li>
<li>前往香港的人可以购买带有香港用户识别模块（SIM）卡的手机。</li>
<li>主要大学的用户可以通过中国教育和研究计算网（China Education and Research Network）更自由地进入世界其他地区。IPv6通常效果最好。</li>
<li>虽然它的协议可以被GFW在以后的日子检测和阻止，但它仍然可以工作。</li>
<li>尽管Tor浏览器本身很难在中国获得，但是一些网民使用Tor和meek-azure可插拔传输器。</li>
<li>由于GFW的某些部分是区域性的，而且部分外包给不同的ISP，因此有一些独立的报告表明OpenConnect等意外方法已经成功。</li>
<li>少数商业虚拟专用网络（VPN）服务模糊了流量，因此他们的服务仍在中国运行。有时只有有限数量的服务器可以正常工作。Apple已将VPN客户从其在中国的应用商店中删除; 受影响的用户必须按照复杂的流程访问美国应用商店。</li>
</ul>
<p>SS和SSR服务器可以是自建的，也可以从设置它们并在客户之间共享它们的微型企业租用。由于它们的图标，SS和SSR有时被称为纸飞机（纸飞机）。因此，国际接入点称为机场（airport）。质量更好的产品通常通过中国电信的“中国下一代网络”（CN2或自治系统4809）连接，以提高性能。最佳性能（和最高价格）来自CN2全球互联网接入（GIA）。在市场的最顶端是租赁国际私人租用线路（IPLC）的服务。</p>
<p>对于自建解决方案，您必须明智地选择虚拟专用服务器（VPS）提供商和位置。选择允许以低成本或免费更改IP地址的提供商可能会有所帮助。特别令人沮丧的是，由于先前客户的操作，IP地址已被阻止。协议和混淆方法的选择也很重要。一些混淆方法允许将代理服务器伪装成Web服务器。如果不使用这种混淆，频繁更改端口号和密码可能会有所帮助。缓慢的页面加载时间可能是由于有限的对等容量而不是有意的节流。TCP的瓶颈带宽和往返（BBR）拥塞控制算法可能对此有所帮助。一些用户还通过kcptun隧道加速TCP。</p>
<h2>版权声明</h2>
<p><a href="https://fanqiangdang.com/thread-425-1-1.html">https://fanqiangdang.com/thread-425-1-1.html</a></p>
 
<h1>Telegram入门使用教程</h1>
<p>本文章只介绍安卓客户端最基本的使用(任何一步骤无需翻墙)。</p>
<p>Telegram Messenger 是一个跨平台的实时通讯应用，它的客户端是自由及开放源代码应用，但是它的服务器是专有应用。</p>
<p>用户可以相互交换加密与自析构的消息，以及照片、影片、文件，支持所有的文件类型。</p>
<p>官方网站有正式发布 Android、iOS、Mac OS X 与 正在 Beta 的 Windows Phone 的版本。</p>
<p>Telegram官方网站：https://telegram.org/</p>
<p>简单的说就是一个安全的纯粹通讯聊天软件。正是因为不受国家监管，所以服务器和官网都被墙了，使用这个软件需要挂代理。</p>
<h2>下载/安装</h2>
<p>安卓Telegram: 点击下载安卓版 （无需翻墙）当然可能不是最新的，建议翻墙后去官网下载</p>
<h2>注册/登录</h2>
<p>安装并运行Telegram 后，会出现如下界面，点击 START MESSAGING 按钮继续。</p>
<p>注意：Telegram如果希望保护隐私，可以用虚拟手机号，别人除非加你好友，否则是无法看到手机号的。</p>
<p>然后就会让你输入你的 手机号，不过因为 Telegram的服务器被墙了，所以需要先设置代理才能 注册/登录。</p>
<h2>设置代理</h2>
<p>点击右上角的 顶部的connecting… 按钮，然后就进入下一页面</p>
<p>点击Add Proxy，选择MTProto Proxy 就会出现相关设置页面按照下面信息填写如图</p>
<p>Server   填写  iukdy.tgproxy.network </p>
<p>Port      填写     8443 </p>
<p>Secret    填写   726564736869656c6476706e2e636f6d</p>
<p>最后点击左上角的√ 保存</p>
<p>附上代理链接成功图</p>
<p>最后一定要勾选 Use Proxy,并且稍等一两分钟才能连上代理</p>
<p>继续我们一开始的步骤，选择国家并输入你的手机号，填写验证码</p>
<h2>版权声明</h2>
<p><a href="https://fanqiangdang.com/thread-34-1-1.html">https://fanqiangdang.com/thread-34-1-1.html</a></p>
 
<h1>扫盲 BTSync（Resilio Sync）——不仅是同步利器，而且是【分布式】网盘</h1>
<p>先向大伙儿宣布个好消息——经过多位热心读者的大力支持，经过几天的努力，已经完成了“微软网盘”到“BitTorrent Sync”的迁移工作。再次向这批热心读者表示感谢。可惜俺不能说出他们的名字/网名，以免给他们带来不必要的麻烦——他们只能作为“幕后无名英雄”。</p>
<h2>引子</h2>
<p>在几周前（12月下旬），俺发了一篇《博客开通【免翻墙】镜像，另通告网盘电子书的问题》，其中提到了俺的“Dropbox 网盘”连续几个月持续处于“流量超限”的状态，基本上没法用来下载电子书了。当时就提到了俺的备选计划——用 BT sync 来作为“第三网盘”。</p>
<p>既然迁移工作已经完成，今天就发一篇教程，向大伙儿简单扫盲一下 BitTorrent Sync 的使用。</p>
<h2>事先说明</h2>
<p>GFW 从2017年7月开始封锁 BTsync 官方的追踪服务器（Tracker Server），导致墙内大部分 BTsync 客户端无法正常工作。对此，俺专门写了一篇博文（如下），介绍应对的招数。</p>
<p>《聊聊 GFW 如何封杀 Resilio Sync（BTSync）？以及如何【免翻墙】继续使用？》</p>
<p>另外，“BitTorrent Sync”从2016年开始改用新的名称——“Resilio Sync”，不过俺还是习惯于原来的名称。（为了打字省力，本文使用简称“BT Sync”）</p>
<h2>BT Sync 是啥？</h2>
<p>BT 下载，相信大伙儿都知道的。今儿个要介绍的 BT Sync，跟 BT 下载一样，都是 BitTorrent 公司发明滴玩意儿，都是采用 P2P 协议来进行传输。</p>
<p>简而言之，BT sync 是一个文件同步工具，让你在几台不同的设备之间，同步文件。</p>
<p>既然是“文件同步工具”，那么最基本的“增量同步”功能，当然是必不可少的。另外，据俺测试：同步完成之后，如果在“发起端”对文件改名，但是文件内容不变，BT Sync【不会】重传文件内容——这算是比较智能的。</p>
<h2>BT Sync 有啥优点？</h2>
<h3>作为“同步工具”的优点</h3>
<p>首先来说说 BT Sync 作为同步工具的优点。至少有如下几个：</p>
<p>1. 不需要有自己的服务器</p>
<p>2. 不需要有公网 IP——如果两台设备都在【内网】，只要这两台设备都能访问到公网，就可以相互同步</p>
<p>3. 文件数量【无】限制，文件大小【无】限制</p>
<p>4. 支持多种网络形态——可以“公网上互相同步”，也可以是“局域网内相互同步”。</p>
<p>5. 支持各种操作系统（以下列表摘自洋文维基百科）</p>
<ul>
<li>Microsoft Windows (XP SP3 or later)</li>
<li>Mac OS X (10.6 or later)</li>
<li>Linux</li>
<li>FreeBSD</li>
<li>NAS Devices</li>
<li>Android</li>
<li>Amazon Kindle Fire</li>
<li>iOS</li>
<li>Windows Phone</li>
</ul>
<h3>作为“分布式网盘”的优点</h3>
<p>再来说说 BT Sync 作为“分布式网盘”的优点——这也就是为啥，俺决定用它来分享“电子图书馆”和“翻墙工具”。</p>
<p>1. 【没有】存储空间的限制——真要说空间限制，那就是参与节点的硬盘容量（如今【TB 级】的硬盘已经不稀奇了）</p>
<p>2. 【没有】下载流量的限制——与之对比，大部分商业网盘都有这个限制。就是因为这个限制，俺的 Dropbox 网盘才会瘫痪。</p>
<p>3. 【没有】文件大小限制——与之对比，大部分商业网盘对“单个文件大小”都作了限制。</p>
<p>4. 【没有】审查——俺想在上面分享啥，就分享啥——咱们朝廷管不了，美国的版权法也管不了（一想到这点，心里那个爽啊）。</p>
<p>5. 【没有】费用——老读者都明白，俺是很讨厌付费服务的——其实俺不缺钱，俺是担心身份暴露（即使“比特币”支付，也【不是】彻底“匿名”的）</p>
<p>6. 【很难】被封杀——与之对比，国外的商业网盘，GFW 说封杀就封杀（比如俺用来分享电子书的“微软网盘”和“Dropbox 网盘”都撞墙了）</p>
<p>看完这些优点，或许你就明白——为啥 BTSync 被称为“Dropbox 终结者”）</p>
<p>另外，开源的 BT Sync 替代品已经出现了——名叫 Syncthing。可惜还不够成熟，而且也【不】适合用来做大范围分享。</p>
<h3>“安全方面”的优点</h3>
<p>不同的 BT Sync 节点之间进行数据传输时，会采用“强加密”的方式，以防止数据传输流量被嗅探（偷窥）。</p>
<p>只有参与同步的节点，才能解密；而那些帮你中转的“中转服务器”，是没有办法解密的。因此，即使你的 ISP（电信运营商）监视你的流量，也【无法】知道你通过 BT Sync 传输了啥文件。</p>
<h2>BT Sync 的下载</h2>
<p>要下载 BT Sync，请猛击它的官网链接 <a href="https://www.getsync.com/">https://www.getsync.com/</a>，就可以看到下载链接。</p>
<p>如果你下载的是 Windows 上运行的 exe，会自带“数字签名”。为了保险起见，校验一下。（如何校验 exe 的数字签名，请看《扫盲文件完整性校验——关于散列值和数字签名》）</p>
<h2>BT Sync 的安装</h2>
<p>(考虑到大部分人用的是 Windows，俺就以这个系统为例）</p>
<p>你下载的 exe 文件是【绿色】滴，可以直接双击运行。启动的时候，如果系统弹出一个“登录对话框”让你输入管理员密码，你直接取消掉——因为 BT Sync 在普通用户的权限下，也可以运行。</p>
<p>在《如何防止黑客入侵》系列中，俺专门强调过——能不用管理员权限，就尽量别用）</p>
<p>运行之后，有两种可能：</p>
<p>1. 如果系统的 IE 版本足够高，BT Sync 会显示出客户端界面。</p>
<p>2. 如果系统的 IE 版本比较低，BT Sync 会自动弹出系统中的默认浏览器，并打开 BT Sync 的 Web 管理界面（如下图）。万一没有自动弹出浏览器，你可以自己打开浏览器，访问 <a href="http://127.0.0.1:8888/">http://127.0.0.1:8888/</a> 就可以看到 BT Sync 的管理界面。</p>
<p></p>
<h2>BT Sync 的使用</h2>
<p>前面说了好多屁话，现在终于说到重点部分啦。</p>
<p>本文下面的使用说明，采用是的 BTSync 1.4 版本的截图。后来 BTSync 又出了好几个新版本，界面会有变化。大伙儿只需抓住关键点，无需在意界面的差别）</p>
<h3>“同步密钥”的概念</h3>
<p>要使用 BT Sync 的功能，首先要了解“同步密钥”的概念。</p>
<p>每个参与同步的目录，都有其密钥。你只有拿到这个密钥，才能同步该目录的文件。</p>
<p>对于普通的使用场景，每个同步目录对应两个密钥：一个是“读写密钥”，另一个是“只读密钥”。顾名思义，拥有“读写密钥”的节点，可以修改同步目录的内容；反之，拥有“只读密钥”的节点，只能读取，无法修改——所谓的“无法修改”，就是说：即使你修改了同步目录的内容，修改结果也【不会】同步给其它节点（所以这种修改是【无】意义的）。</p>
<p>对于目前的 1.4.XXX 版本，这两种密钥的长度都是【33 个字符】。“读写密钥”总是以 A 开头；“只读密钥”总是以 B 开头。因此，密钥的有效长度是 32 个字符（有兴趣的同学可以去算一下，此密钥包含多少比特）。这么长的密钥，基本上不用担心被暴力猜解（至少10年之内不用担心）。</p>
<p>至于如何得到密钥，请看下面的介绍。</p>
<h3>设置语言</h3>
<p>考虑到大部分同学，不喜欢（或者看不懂）洋文界面。所以第一次启动之后，先把“洋文”改为“天朝文”。配置界面的截图如下。</p>
<h3>如何“接受同步”</h3>
<p>先从比较简单的“接受同步”说起。</p>
<p>比如说，俺已经共享了一个“翻墙软件”的同步目录，然后俺把只读密钥公布如下：</p>
<p style="color:#f00;">BTLZ4A4UD3PEWKPLLWEOKH3W7OQJKFPLG</p>
<p>当你拿到这个密钥之后，可以通过如下步骤，导入密钥，并在你本机创建一个同步目录。（截图如下）</p>
<p>完成上述步骤之后，BT Sync 就把你选择的目录作为同步目录。今后俺如果往自己的“翻墙工具”目录增加了新的软件，你的 BT Sync 会自动同步并保存到你的这个目录。</p>
<p>在这个同步目录里面会创建一个名为 .sync 的子目录。这个 .sync 目录会包含 BT Sync 的一些配置信息（可能该目录的密钥也在里面），你【可别】把它给删喽。</p>
<p>接受了某个同步目录之后，在 BT Sync 的主界面上，会显示该目录的信息。</p>
<p>这时候，你可以修改该“同步目录”的“选项参数”。（截图如下）</p>
<h3>如何“发起同步”</h3>
<p>说完“接受同步”，再来说说“发起同步”。</p>
<p>跟前面一样，你可以修改该“同步目录”的“选项参数”。（截图如下）</p>
<p>由于你是发起方，所以你默认就具有了“读写密钥”。这个“读写密钥”很重要，【不可轻易泄露】。一旦泄露，得到读写密钥的节点，就可以修改这个目录的内容。</p>
<p>前面提到，同步目录下的 .sync 目录会包含一些配置文件（可能也含有密钥，俺不太确定）。所以，为了保险起见，当你发起【多个】同步目录的时候，这几个目录相互之间【不要】嵌套包含。</p>
<h3>某些全局的“选项”</h3>
<p>最后，来说说全局的“选项”——也就是一开始修改“语言”的地方。</p>
<p>全局选项有几个地方，俺需要提醒一下。<p>
<p>如果你让 BT Sync 走代理（proxy）的方式联网，最好勾选“使用代理服务器用于主机名解析”这个复选框。</p>
<p>BT Sync 默认会使用当前系统的主机名，作为它的节点名（也叫“设备名”）。</p>
如果你对隐私比较在意，建议到全局选项的界面中，把 BT Sync 的设备名修改掉，改成一个跟你本人真实身份无关的名称。</p>
<h2>疑难解答</h2>
<p>本章节专门汇总使用过程中碰到的奇奇怪怪的问题。</p>
<h3>关于“找不到节点”</h3>
<p>如果找不到节点，可以尝试如下操作，或许就可以找到了（有时候要看运气）：</p>
<p>1. 先把已经添加的同步目录删除（在界面上选中，点菜单中的“断开连接”）</p>
<p>2. 重新导入密钥</p>
<h3>关于“系统时间”的误差</h3>
<p>运行 BT Sync 的系统，最好是开启自动时间同步。否则的话，如果系统时间严重不准，会导致 BT Sync 无法正常工作。</p>
<h2>俺分享的资源</h2>
<p>因为今天是扫盲，就先聊最基本的功能使用。以后有空再聊高级话题——其实俺也是刚上手不久，没啥高级话题可说 :(</p>
<h3>翻墙工具</h3>
<p>在刚才示范的时候，已经提到——俺用 BT Sync 来分享翻墙工具，密钥如下：</p>
<p style="color:#f00;">BTLZ4A4UD3PEWKPLLWEOKH3W7OQJKFPLG</p>
<p>用 BT Sync 分享翻墙工具，最大的好处是——可以绕过 GFW。只要有一个【墙内的】BT Sync 节点拿到翻墙工具，那么其它的【墙内节点】也可以同步并得到。而 GFW 是部署在天朝的国际出口。【墙内】两台电脑之间的传输，【不会】经过 GFW。</p>
<h3>电子书同步密钥</h3>
<p>经过前几篇博文的铺垫，很多电子书爱好者估计已经跃跃欲试了。</p>
<p>下面就是俺用 BT Sync 分享的电子书目录的密钥。每个目录的结构，跟俺的微软网盘上的目录结构，是基本一致的。</p>
<p>B7P64IMWOCXWEYOXIMBX6HN5MHEULFS4V 俺博客的“离线浏览页面”和“博客电子书制作脚本”</p>
<p>BRSSYZTSAC6UGYTUOJ22L4GCO7QESPPBD 政治（含大量禁书）</p>
<p>BNZ6DOA6W577O6GUNH7C3MY6DWC6FTDQB 心理学</p>
<p>BSH7FXJFVWJTKWGSX5GTWX7PHZZ2D2M7Q 历史</p>
<p>B2FRYA6AXCDW6CF4YJVFWKH2HAXOFICOX 经济</p>
<p>B3WNBTAAFFAODFR6FQ3E3L5BBSJAFNBSJ 管理</p>
<p>BZR4TTYHT25QWUIE6YNMAKWUGBHKSGLC6 社会学</p>
<p>BMBB5YLBIJJAE5H6TP27OS7YCEUKCYHZK 文艺</p>
<p>B6WWVBXPMZDI5IL4KED6AAHA5FO4UNKQF 哲学</p>
<p>BMWWZALG4P56LREF47EE2WSWHZEM4E6BL 军事</p>
<p>BUPSDXFA3TP7KCMLHALRHLIX2FEJEUJFE IT（信息技术）</p>
<h3>电子书清单</h3>
<p>大伙儿可以猛击如下链接，就可以看到【所有】电子书的列表（全都按学科进行分类了）。该清单也包含了上述密钥及相关说明。</p>
<p><a href="https://github.com/programthink/books">https://github.com/programthink/books</a></p>
<h2>版权声明</h2>
<p>本博客所有的原创文章，作者皆保留版权。转载必须包含本声明，保持本文完整，并以超链接形式注明作者编程随想和本文原始地址：</p>
<p><a href="https://program-think.blogspot.com/2015/01/BitTorrent-Sync.html">https://program-think.blogspot.com/2015/01/BitTorrent-Sync.html</a></p>
 
<h1>聊聊 GFW 如何封杀 Resilio Sync（BTSync）？以及如何【免翻墙】继续使用？</h1>
<h2>引子</h2>
<p>最近一个多月，有好些读者抱怨 Resilio Sync（原名叫做“BitTorrent Sync”，简称“BTsync”）无法正常使用。所以俺一直打算写一篇来谈谈这个事情。顺便也分享一下：如何继续【免翻墙】使用 Resilio Sync。</p>
<p>(注：为了打字省力，本文以下部分使用“BTsync”来表示“Resilio Sync”。请原谅俺的懒惰）</p>
<p>如果你从来没有听说过 BTsync 这个玩意儿，建议先看看维基百科（中文，洋文）。另外，还可以看看俺写的扫盲教程（在这里）。</p>
<p>俺之所以大力普及该软件，关键在于：任何人都能用它来搭建一个【分布式】的网盘。关于【分布式】的重要性，俺已经唠叨过很多次了。对这个话题感兴趣的同学可以看下面这篇：</p>
<p>《“对抗专制、捍卫自由”的 N 种技术力量》</p>
<h2>BTsync 如何实现【节点发现】？</h2>
<p>为了聊今天的话题，需要先介绍一点点基础知识——BTsync 的“节点发现”机制。</p>
<p>大伙儿应该都知道：BT Sync 是一款点对点（P2P）的工具，用来进行文件共享和文件同步。对于任何一款 P2P 软件，其关键的机制是【节点发现】（洋文叫做“peer discovery”）。</p>
<p>BTsync 有两种完全不同的使用场景，分别是：局域网 和 公网。今天这篇只讨论 BTsync 在【公网】的使用。</p>
<p>BTsync 要想在【公网】上找到其它节点（peer），大致通过如下几招：</p>
<h3>Tracker Server（追踪服务器）</h3>
<p>BT 下载的老用户应该听说过 Tracker 这个概念。打个比方，Tracker Server 类似于节点（peer）之间的中介，互不认识的节点通过 Tracker Server 来获得对方的信息（IP 和端口）。</p>
<p>那么，BTsync 的客户端是如何知道 Tracker Server 的 IP 地址捏？通常有两种方法：</p>
<p>方法1</p>
<p>客户端软件本身已经内置了若干个 Tracker Server 的 IP 地址和端口。</p>
<p>方法2</p>
<p>客户端软件先连上 BTsync 公司官方的某个网站（通过域名的方式），然后得到某个配置文件，这个配置文件中会包含 Tracker Server 的 <a href="https://config.resilio.com/sync.conf">https://config.resilio.com/sync.conf</a></p>
<h3>DHT 网络</h3>
<p>DHT 是个啥玩意儿捏？这个说来话长，今天就不展开细谈了（此文发出后不久，俺又写了一篇 DHT 的扫盲：《聊聊分布式散列表（DHT）的原理——以 Kademlia（Kad） 和 Chord 为例》）。</p>
<p>简而言之，你可以通俗的理解为：DHT 是用来弥补 Tracker Server 的局限性的。有了 DHT 这个机制，【不】需要依赖 Tracker Server 也可以做到【节点发现】。</p>
<p>当然啦，【这是有前提滴】——你要先连上 DHT 网络的某个节点。然后就可以通过你的第一个接入节点，逐步找到 DHT 网络中的其它节点，并且还能找到你想要获取的数据位于哪些节点。（这就好比你要想加入某个封闭的社团，先要得到社团中的某个人作为你的引荐人）</p>
<p>怎样找到 DHT 网络中的某个节点并与之建立连接，用技术行话称之为“bootstrap”。显然，bootstrap 是 DHT 的关键。</p>
<p>如果 BTsync 客户端支持 DHT 并启用了 DHT，客户端通常是先连接到 Tracker Server，然后就可以通过 Tracker Server 获得某个 DHT 网络的节点，于是就实现了 DHT 的 bootstrap。</p>
<h3>Predefined Hosts（预定义主机）</h3>
<p>所谓的“预定义主机”，说白了就是：用户自己在 BTsync 客户端的配置界面输入其它节点的 IP 和端口。</p>
<p>这个功能用得不多，但在某些情况下很有用。比如前面提到 DHT 的 bootstrap。在某些特殊环境中（比如墙内），你可以通过“预定义主机”这个功能添加某个 DHT 网络中的节点，然后你的 BTsync 客户端就可以实现 bootstrap 并加入到 DHT 中（关于这点，待会儿俺还会细聊）</p>
<h3>这几种方式的优缺点对比</h3>
<p>Tracker Server（追踪服务器）</p>
<p>这个机制最傻瓜化，完全无需用户干预。</p>
<p>但是这个机制也是【最容易被封杀】的。</p>
<p>DHT 网络</p>
<p>在没有“墙”的网络环境中，这个机制同样也是很傻瓜化的（客户端会自动通过 Tracker 找到 DHT 网络）</p>
<p>但如果是在【墙内】，Tracker 已经被屏蔽，需要手动实现 DHT 的 bootstrap（具体如何做，待会儿俺细聊）。</p>
<p>一旦实现了 bootstrap，DHT 很难被封杀。</p>
<p>Predefined Hosts（预定义主机）</p>
<p>这个机制的操作门槛最高。被 GFW 封锁的难度与 DHT 相当。</p>
<p>其门槛在于——你需要找到【IP 地址固定不变】的 BTsync 节点（至于如何找到这种节点，在本文后续部分会提及）</p>
<h2>GFW 如何封杀 BTsync？</h2>
<p>看完上面的介绍，聪明的同学已经猜到 GFW 是如何封杀 BTsync 的。其实很简单，只要封锁 Tracker Server（追踪服务器）就可以让绝大部分客户端失效。因为绝大部分客户端都需要依赖 Tracker Server 来实现“节点发现”。</p>
<p>要封锁 Tracker Server，GFW 可以有两种方法：其一是“域名污染”，其二是“IP 黑名单”。（关于“域名污染”这个概念，可以参见俺之前的扫盲教程——《扫盲 DNS 原理，兼谈“域名劫持”和“域名欺骗/域名污染”》。</p>
<p>刚开始的时候，GFW 采用“域名污染”的方式。所以网上也相应出现了一些文章，介绍若干招数，用来对抗域名污染，以便继续使用 BTsync。这些招数，无非就是：“修改 hosts 文件” 或 “加密 DNS 传输”。</p>
<p>说到这儿，俺要稍微泼点冷水。不论你是“修改 hosts”还是“用 dnscrypt 加密域名解析的传输”，都只能用来对付“域名污染”，但却【无法】对付“IP 黑名单”。由于 BTsync 官方提供的 Tracker Server，数量很有限（通常只有4个，2个是 IPv4，2个是 IPv6），而且这4个服务器的 IP 地址相对固定（不会经常变）。所以 GFW【很容易】就可以封掉这几个 IP 地址（简直可以说是“易如反掌”）。</p>
<p>那么，咋办捏？</p>
<h2>为啥 GFW 难以封杀 DHT 网络？</h2>
<p>综上所述，要想让 BTsync 可以【免翻墙】使用，就不要再指望 Tracker Server 这种“节点发现”的机制了。因为这种机制太容易被封杀。</p>
<p>相比之下，GFW 要想封杀 DHT 就会困难得多（不是不可能，而是难度急剧增大）。为啥捏？主要有如下几个难点：</p>
<h3>难点1</h3>
<p>因为 BTsync 的 DHT 网络中会有很多节点，而且这些节点是【动态变化】的——每时每刻都有老的节点下线并且有新的节点上线。要想通过“IP 黑名单”的手段来屏蔽 DHT 网络中的所有节点，（对 GFW 维护人员来说）工作量会变得很大。</p>
<h3>难点2</h3>
<p>从技术上讲，GFW 的开发团队也可以做一些伪装成 BTsync 客户端的 agent，用这些 agent 来探测由 BTsync 客户端所构成的 DHT 网络中的节点信息。</p>
<p>但是，每个 DHT 节点并【不能】得到 DHT 网络中【所有节点】的信息，而只能得到其中一个很小的子集（只占整体的一小部分）。</p>
<p>所以，如果要用这招，GFW 开发团队需要构造足够多的 agent。（即便这样，这招也【无法解决】下面的第三个难点）</p>
<h3>难点3</h3>
<p>在 BTsync 的 DHT 网络中，有些节点位于【墙内】。GFW 对这些墙内节点是【无可奈何】的。因为 GFW 部属的位置在天朝公网的【国际出口】。通俗地说，GFW 只能屏蔽流经国际出口的流量。如果有两个节点【都在墙内】，那么这两个节点之间的流量是不会被 GFW 检测到的，GFW 也无法屏蔽这种【墙内流量】。</p>
<h3>补充说明</h3>
<p>虽然这个章节讲的是：BTsync 客户端构成的 DHT 网络。但其它形式的 DHT 网络，原理也是类似的，它们也会让 GFW 头疼。</p>
<p>如果你想对 DHT 有更多了解，请看：</p>
<p>《聊聊分布式散列表（DHT）的原理——以 Kademlia（Kad） 和 Chord 为例》</p>
<h2>如何让你的 BTsync 客户端使用 DHT 网络？</h2>
<h3>首先，要选择【正确的】客户端版本？</h3>
<p>刚才提到了 DHT 的重要性。对于 BTsync 而言，只有4个大版本支持 DHT，分别是：</p>
<p>1.3.x（同步目录数无限制，但不支持“选择性同步”）</p>
<p>1.4.x（同步目录数无限制，但不支持“选择性同步”）</p>
<p>2.0.x（免费试用30天，30天之后如果不付费，最多只能同步10个目录）</p>
<p>2.1.x（免费试用30天，30天之后如果不付费，最多只能同步10个目录）</p>
<p>如果你不需要“选择性同步”这个功能，就选 1.4.x 版本。</p>
<p>除非你极其需要“选择性同步”这个功能，才去选 2.1.x 版本，然后参考本文后续的【Q & A】章节，破解时间限制。</p>
<p>（本文后续部分的示意图会用 1.4.111 的界面进行截图，这个版本不仅是 1.4.x 的最后一个版本，也是 1.x.x 的最后一个版本）</p>
<p>根据某些读者反馈：1.4.x 版本尚未被彻底封杀，可以【直接使用】（提醒：在每个同步目录的“偏好设定”选项中，要记得勾选 DHT）。</p>
<p>虽然 1.4.x 目前是直接可用，但说不定过了几天就会出问题。所以大伙儿要重点阅读下面这个章节。</p>
<h3>如何加入到 DHT 网络？</h3>
<p>前面说了：接入 DHT 网络的关键是——找到 DHT 网络中的某个节点并与之建立连接（行话叫“bootstrap”）。下面要介绍的就是——如何在【墙内】实现 bootstrap。</p>
<p>步骤1</p>
<p>由于 GFW 封锁了官方的“追踪服务器”，你的客户端第一次运行时多半找不到任何 DHT 的节点。这时候你要先让 BTsync 走翻墙通道。</p>
<p>BTsync 翻墙可归纳为两种：其一是 VPN，其二是 proxy。（对于技术菜鸟，俺建议用 VPN，比较傻瓜化）</p>
<p>对于 VPN 方式：你需要在系统中运行 VPN 软件并正常连接到 VPN 服务器，然后在这个系统中运行 BTsync，BTsync 本身【无需】额外设置，就能自动通过 VPN 翻墙了。</p>
<p>对于 proxy 方式：你需要进入 BTsync 的“偏好设定”界面，找到 proxy 选项，正确填写。设置完 proxy 要记得重启 BTsync。</p>
<p>（在界面右上方的工具条，点击最右边那个按钮，打开菜单）</p>
<p>（在全局设置中填写代理的“类型、地址、端口”）</p>
<p>步骤2</p>
<p>添加一个同步目录的密钥（如何添加同步密钥，请参见扫盲教程），然后设置这个新加目录。</p>
<p>（选中这个同步目录，点最右边那三个点的按钮，打开菜单，然后点“偏好设定”）</p>
<p>（要记得勾选【DHT】这项）</p>
<p>等待一段时间（具体多长，视情况而定）。你要一直等，直到客户端界面上已经显示出若干节点数，并且已经开始进行同步。</p>
<p>步骤3</p>
<p>为了保险起见，你再次进入【每个同步目录】的“偏好设定”界面，【确保勾选 DHT】，同时把“追踪服务器”和“中继服务器”这2个选项【都去掉】。</p>
<p>然后重启 BTsync。等待它进入正常工作状态（找到其它节点并正常同步）。当它能正常工作，就说明 BTsync 已经基于 DHT 而【不再依赖】Tracker 了。</p>
<p>（去掉“中继服务器”和“追踪程序服务器”这2项，但要记得保留 DHT 这项）</p>
<p>步骤4</p>
<p>到了这最后一步，你可以把翻墙通道关掉，测试 BTsync 是否能【免翻墙】正常同步。</p>
<p>对于 VPN 翻墙，你只需要关闭/退出 VPN 软件，BTsync 不用重启；</p>
<p>对于 proxy 翻墙，你需要进入 BTsync【全局】的“偏好设定”界面，去掉所有 proxy 的设置（地址、端口），然后记得要【重启】BTsync（重启后，proxy 设置的改变才会生效）。</p>
<h3>如果你很久【没有】运行 BTsync，导致再也连不上 DHT，如何复活？</h3>
</p>BTsync 一旦接入了 DHT 网络，会把它得到的 DHT 网络的节点信息（地址、端口）保存在本地的某个文件中。那么当它下次启动的时候，就不用再费劲地去搞 bootstrap 了。</p>
<p>但是，假如你已经很长时间（比如超过一周）没有运行 BTsync，这时候本地保存的那些节点信息可能已经过时（请记住：DHT 网络的节点是在动态变化中的）。于是你的 BTsync 客户端又处于“脱离组织”的状态。这时候你需要再次重复前一个小节的那几个步骤，再来一次 bootstrap 操作流程。</p>
<h3>如何避免客户端脱离组织？</h3>
<p>刚才俺说了：如果你在墙内并且长时间没有运行 BTsync，那么将来再次启动 BTsync 会找不到 DHT 网络（脱离组织）。如何避免这种情况捏？俺简单介绍几招：</p>
<p>招数1：经常运行/始终运行</p>
<p>如果你是在 PC 上运行 BTsync，并且你的 PC 具备互联网的宽带接入。那么你干脆就让这个 BTsync 一直运行（提醒：在 BTsync 客户端上【至少添加一个】同步目录）</p>
<p>在这种状态下，你这个客户端始终是 DHT 网络这个组织的一份子，它可以持续得到 DHT 网络中节点变化的信息。这样就可以避免脱离组织。</p>
<p>招数2：用“预定义主机”的方式添加固定节点</p>
<p>要玩招数2，要求比较高，需要一个前提——你知道某个【地址/端口都相对固定】的 DHT 节点。</p>
<p>假设你知道了这种节点，那么你就可以进入【每个同步目录】的“偏好设定”界面，把这些 DHT 节点的“地址/端口”填写到“预定义主机”中。</p>
<p>（选中这个同步目录，点最右边那三个点的按钮，打开菜单，然后点“偏好设定”）</p>
<p>（勾选“使用预定义主机”，然后填写主机的“IP 地址、端口”）</p>
<p>完成上述设置后，客户端在每次运行时都会去找你添加的这几个节点，然后通过这些节点找到 DHT 网络的其它节点。</p>
<p>有的同学肯定要问了：这种“固定地址的 BTsync 节点”是怎么来的。</p>
<p>最直接的办法是：你自己买一个 VPS，并且这个 VPS 的地址【尚未】被 GFW 封杀。然后你在这个 VPS 上【长时间运行】BTsync，并且这个 BTsync 要记得使用 DHT 网络。那么这个 VPS 上的 BTsync 就会成为 DHT 网络中的一个稳定节点。然后你就可以让自己手机端或 PC 端的 BTsync 首先通过这个 VPS 节点进行 DHT 联网。</p>
<p>如果你自己懒得搭建 VPS，也可以通过你朋友或同事搭建的 VPS 来这么干。</p>
<p>再不济，你还可以去某些论坛或聊天群里面打听，或许也能了解到这种固定地址的 DHT 节点。</p>
<h2>FAQ</h2>
<p>在文本结束前，补充一个问答时间。下面是一些经常被提及的问题。</p>
<h3>读者提问：为啥新版本的 BTsync（Resilio Sync）反而没有 DHT 功能？</h3>
<p>从前面的介绍中可以看出：早期版本是支持 DHT 的，从 2.2.x 开始就去掉了 DHT。
<p>俺个人的猜测是（纯属个人猜测）：</p>
<p>BT 公司（BitTorrent, Inc.）是一直想通过 BTsync 来赚钱的。比如说：2.0 和 2.1 版本搞了一个“同步目录数限制”，用户要付费才能取消限制（这种伎俩引发众怒，所以官方被迫在 2.2.x 版本又去掉了限制）。再比如说：BT 公司后来剥离出一家 Resilio 公司单独运营 BTsync，并把 BTsync 重新包装成 Resilio Sync，这些也都是为了商业营销方面的考虑。</p>
<p>而去掉 DHT 的关键性在于——没有 DHT，所有的客户端都需要先连接到官方提供的 Tracker Server（追踪服务器）才能工作。这样一来，BT 官方（Resilio 公司）就可以对客户端软件具有【更多的控制力度】。</p>
<p>举个例子：从 2.2.x 开始的版本都需要依赖 Tracker Server。对这些版本的客户端，（从技术上讲）BT 公司有办法强迫它们升级版本（不升级就使之无法工作）</p>
<h3>读者提问：BT sync 会暴露公网 IP 吗？</h3>
<p>如果你的 BTsync 客户端【没有】通过代理或 VPN 的方式，而是直接联网，那么与你连接的其它节点【可能会】看到你的公网 IP。</p>
<h3>读者提问：对于电信运营商（ISP）或者公司网管，能监控到我的 BTsync 流量吗？</h3>
<p>BTsync 传输的数据是【强加密】的。所以，监控网络流量的人（Sniffer）最多只能猜测出你在用 BTsync，但是【无法知道】你正在同步的文件名和文件内容？</p>
<h3>读者提问：用 BT sync 同步翻墙工具会被跨省吗？</h3>
<p>维稳系统的人力（比如说网警）是有限的，他们的精力也是有限的。所以他们会重点搜捕敏感信息的【发布源头】（比如像俺这种大坏蛋）。对于【获取】敏感信息的普通网民，他们才没空搭理你。</p>
<p>以翻墙来举例：</p>
<p>六扇门（公安、国安）是不会去抓翻墙的网民（太多了，抓不过来，而且法不责众）。相比之下，网警会想办法去定位翻墙工具的作者。</p>
<p>对于 BT sync 也类似。如果你通过 BT sync【获取】敏感内容，六扇门才懒得理你；但如果你通过 BT sync【发布】敏感内容，就要小心被六扇门的人盯上。所以，俺作为 BT sync 的发布源，一直是采用【基于 TOR 的多重代理】来运行 BT sync。</p>
<h3>读者提问：在【不付费】的情况下，如何去掉 2.1 和 2.2 的限制？</h3>
<p>（先声明：这招是网上看来的，俺【没】尝试过）</p>
<p>在安装前，先把系统时间调到若干年之后（比如2020年或2030年），然后再安装。</p>
<p>等到你用了超过30天，试用期结束了，你把系统事件调回正常的。这时候 BTsync 会以为还在试用期内。</p>
<h3>读者提问：为啥【不用】Syncthing 来替代 BTsync 作为分布式网盘？</h3>
<p>首先俺承认：Syncthing 作为开源软件，在“开源”这点上明显好于闭源的 BTsync。</p>
<p>但是，Syncthing 的问题在于——更适合用于【私有分享】，而【不】适合用于【公有分享】。也就是说，你个人用它在多台设备之间同步，是没啥问题滴；但像俺这样用来搞一个面向成千上万网民的分布式网盘，Syncthing 就显得不合适了。</p>
<h3>读者提问：能否提供 BTsync 的校验码？</h3>
<p>先分享俺手头已有的 1.4.111 版本在各个平台下的软件包的哈希散列值（考虑到 MD5 和 SHA1 已经不够严密，下面使用【SHA256】）</p>
<p>（俺手头这几个软件包是当年从 BT 官网下载并保存至今）
<p>483a8203d11053fe18f89bb4d95aaf97c4d6e4203a546d0f81efe19c5b221638 Windows/BTSync-1.4.111.exe</p>
<p>f3b3095d5b7021157ada032040144e715621585864e979ba53a4697be8918ae3 Linux/btsync_i386-1.4.111.tar.gz</p>
<p>6ea03cd2f60177baca58c701b80e1abf44b7c42fc4ec5b8bcfd3b266876e832f Linux/btsync_x64-1.4.111.tar.gz</p>
<p>758cb2e3b21a21297a6fc46ca36999b2c7c170939b366e012af62a2ca953179c Linux/btsync_glibc23_i386-1.4.111.tar.gz</p>
<p>921c47be0f60a3c88e8452a1de5252b2cbf1c8280d57a011f400d3cb9df676cc Linux/btsync_glibc23_x64-1.4.111.tar.gz</p>
<p>1c7df900e4a64d7f349605b3406c183399fb09a6b96278ae04817e2fcce0acf4 MacOS/BTSync-1.4.111.dmg</p>
<p>c29133157b30ffbfb940a1c24da658779a35ed3e50b69c21b3d911a66434aa6f Android/btsync_android-1.4.65.apk</p>
<h2>结尾</h2>
<p>今天先聊到这儿。关于本文介绍的这些，需要大伙儿多反馈，多分享经验。</p>
<p>与 GFW 斗争，需要群策群力。（套用我党的一句口号）要让 GFW 陷入到人民战争的汪洋大海！</p>
<h2>版权声明</h2>
<p>本博客所有的原创文章，作者皆保留版权。转载必须包含本声明，保持本文完整，并以超链接形式注明作者编程随想和本文原始地址： <a href="https://program-think.blogspot.com/2017/08/GFW-Resilio-Sync.html">https://program-think.blogspot.com/2017/08/GFW-Resilio-Sync.html</a></p>

</div>

</body>
</html>
